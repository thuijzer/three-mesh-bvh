function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequire4485;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequire4485=i);var o,r,d=i("hGT0Q"),s=i("c0yzz"),l=i("4EHgc"),c=i("W2bOH"),p=i("7N5zk"),m={};o=m,r=function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function a(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";n=e}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),a(++n%i.children.length)}),!1);var o=(performance||Date).now(),r=o,d=0,s=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:i,addPanel:t,showPanel:a,begin:function(){o=(performance||Date).now()},end:function(){d++;var e=(performance||Date).now();if(l.update(e-o,200),e>r+1e3&&(s.update(1e3*d/(e-r),100),r=e,d=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:a}};return e.Panel=function(e,t,a){var n=1/0,i=0,o=Math.round,r=o(window.devicePixelRatio||1),d=80*r,s=48*r,l=3*r,c=2*r,p=3*r,m=15*r,u=74*r,f=30*r,w=document.createElement("canvas");w.width=d,w.height=s,w.style.cssText="width:80px;height:48px";var h=w.getContext("2d");return h.font="bold "+9*r+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=a,h.fillRect(0,0,d,s),h.fillStyle=t,h.fillText(e,l,c),h.fillRect(p,m,u,f),h.fillStyle=a,h.globalAlpha=.9,h.fillRect(p,m,u,f),{dom:w,update:function(s,y){n=Math.min(n,s),i=Math.max(i,s),h.fillStyle=a,h.globalAlpha=1,h.fillRect(0,0,d,m),h.fillStyle=t,h.fillText(o(s)+" "+e+" ("+o(n)+"-"+o(i)+")",l,c),h.drawImage(w,p+r,m,u-r,f,p,m,u-r,f),h.fillRect(p+u-r,m,r,f),h.fillStyle=a,h.globalAlpha=.9,h.fillRect(p+u-r,m,r,o((1-s/y)*f))}}},e},"object"==typeof m?m=r():"function"==typeof define&&define.amd?define(r):o.Stats=r();var u=i("ghLil"),f=i("aBPXg");const w={firstPerson:!1,displayCollider:!1,displayBVH:!1,visualizeDepth:10,gravity:-30,playerSpeed:10,physicsSteps:5,reset:F};let h,y,g,S,x,v,b,M,P,V,z,A=!1,B=!1,C=!1,E=!1,D=!1,W=new d.Vector3,H=new d.Vector3(0,1,0),R=new d.Vector3,k=new d.Vector3,L=new d.Box3,T=new d.Matrix4,G=new d.Line3;function F(){W.set(0,0,0),V.position.set(15.75,-3,30),y.position.sub(z.target),z.target.copy(V.position),y.position.add(V.position),z.update()}function I(e){W.y+=A?0:e*w.gravity,V.position.addScaledVector(W,e);const t=z.getAzimuthalAngle();B&&(R.set(0,0,-1).applyAxisAngle(H,t),V.position.addScaledVector(R,w.playerSpeed*e)),C&&(R.set(0,0,1).applyAxisAngle(H,t),V.position.addScaledVector(R,w.playerSpeed*e)),E&&(R.set(-1,0,0).applyAxisAngle(H,t),V.position.addScaledVector(R,w.playerSpeed*e)),D&&(R.set(1,0,0).applyAxisAngle(H,t),V.position.addScaledVector(R,w.playerSpeed*e)),V.updateMatrixWorld();const a=V.capsuleInfo;L.makeEmpty(),T.copy(M.matrixWorld).invert(),G.copy(a.segment),G.start.applyMatrix4(V.matrixWorld).applyMatrix4(T),G.end.applyMatrix4(V.matrixWorld).applyMatrix4(T),L.expandByPoint(G.start),L.expandByPoint(G.end),L.min.addScalar(-a.radius),L.max.addScalar(a.radius),M.geometry.boundsTree.shapecast({intersectsBounds:e=>e.intersectsBox(L),intersectsTriangle:e=>{const t=R,n=k,i=e.closestPointToSegment(G,t,n);if(i<a.radius){const e=a.radius-i,o=n.sub(t).normalize();G.start.addScaledVector(o,e),G.end.addScaledVector(o,e)}}});const n=R;n.copy(G.start).applyMatrix4(M.matrixWorld);const i=k;i.subVectors(n,V.position),A=i.y>Math.abs(e*W.y*.25);const o=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(o),V.position.add(i),A?W.set(0,0,0):(i.normalize(),W.addScaledVector(i,-i.dot(W))),y.position.sub(z.target),z.target.copy(V.position),y.position.add(V.position),V.position.y<-25&&F()}!function(){const t=1251612;h=new d.WebGLRenderer({antialias:!0}),h.setPixelRatio(window.devicePixelRatio),h.setSize(window.innerWidth,window.innerHeight),h.setClearColor(t,1),h.shadowMap.enabled=!0,h.shadowMap.type=d.PCFSoftShadowMap,h.outputEncoding=d.sRGBEncoding,document.body.appendChild(h.domElement),g=new d.Scene,g.fog=new d.Fog(t,20,70);const a=new d.DirectionalLight(16777215,1);a.position.set(1,1.5,1).multiplyScalar(50),a.shadow.mapSize.setScalar(2048),a.shadow.bias=-1e-4,a.shadow.normalBias=.05,a.castShadow=!0;const n=a.shadow.camera;n.bottom=n.left=-30,n.top=30,n.right=45,g.add(a),g.add(new d.HemisphereLight(16777215,2241348,.4)),y=new d.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,50),y.position.set(10,10,-10),y.far=100,y.updateProjectionMatrix(),window.camera=y,S=new d.Clock,z=new c.OrbitControls(y,h.domElement),v=new(e(m)),document.body.appendChild(v.dom),(new l.GLTFLoader).load("../models/dungeon_low_poly_game_level_challenge/scene.gltf",(e=>{const t=e.scene;t.scale.setScalar(.01);const a=new d.Box3;a.setFromObject(t),a.getCenter(t.position).negate(),t.updateMatrixWorld(!0);const n={};t.traverse((e=>{if(!(/Boss/.test(e.name)||/Enemie/.test(e.name)||/Shield/.test(e.name)||/Sword/.test(e.name)||/Character/.test(e.name)||/Gate/.test(e.name)||/Cube/.test(e.name)||e.material&&1===e.material.color.r)&&e.isMesh){const t=e.material.color.getHex();n[t]=n[t]||[],n[t].push(e)}})),b=new d.Group;for(const e in n){const t=n[e],a=[];if(t.forEach((e=>{if(0!==e.material.emissive.r)b.attach(e);else{const t=e.geometry.clone();t.applyMatrix4(e.matrixWorld),a.push(t)}})),a.length){const t=p.mergeBufferGeometries(a),n=new d.Mesh(t,new d.MeshStandardMaterial({color:parseInt(e),shadowSide:2}));n.castShadow=!0,n.receiveShadow=!0,n.material.shadowSide=2,b.add(n)}}const i=[];b.updateMatrixWorld(!0),b.traverse((e=>{if(e.geometry){const t=e.geometry.clone();t.applyMatrix4(e.matrixWorld);for(const e in t.attributes)"position"!==e&&t.deleteAttribute(e);i.push(t)}}));const o=p.mergeBufferGeometries(i,!1);o.boundsTree=new f.MeshBVH(o,{lazyGeneration:!1}),M=new d.Mesh(o),M.material.wireframe=!0,M.material.opacity=.5,M.material.transparent=!0,P=new f.MeshBVHVisualizer(M,w.visualizeDepth),g.add(P),g.add(M),g.add(b)})),V=new d.Mesh(new s.RoundedBoxGeometry(1,2,1,10,.5),new d.MeshStandardMaterial),V.geometry.translate(0,-.5,0),V.capsuleInfo={radius:.5,segment:new d.Line3(new d.Vector3,new d.Vector3(0,-1,0))},V.castShadow=!0,V.receiveShadow=!0,V.material.shadowSide=2,g.add(V),F(),x=new u.GUI,x.add(w,"firstPerson").onChange((e=>{e||y.position.sub(z.target).normalize().multiplyScalar(10).add(z.target)}));const i=x.addFolder("Visualization");i.add(w,"displayCollider"),i.add(w,"displayBVH"),i.add(w,"visualizeDepth",1,20,1).onChange((e=>{P.depth=e,P.update()})),i.open();const o=x.addFolder("Player");o.add(w,"physicsSteps",0,30,1),o.add(w,"gravity",-100,100,.01).onChange((e=>{w.gravity=parseFloat(e)})),o.add(w,"playerSpeed",1,20),o.open(),x.add(w,"reset"),x.open(),window.addEventListener("resize",(function(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight)}),!1),window.addEventListener("keydown",(function(e){switch(e.code){case"KeyW":B=!0;break;case"KeyS":C=!0;break;case"KeyD":D=!0;break;case"KeyA":E=!0;break;case"Space":A&&(W.y=10)}})),window.addEventListener("keyup",(function(e){switch(e.code){case"KeyW":B=!1;break;case"KeyS":C=!1;break;case"KeyD":D=!1;break;case"KeyA":E=!1}}))}(),function e(){v.update(),requestAnimationFrame(e);const t=Math.min(S.getDelta(),.1);w.firstPerson?(z.maxPolarAngle=Math.PI,z.minDistance=1e-4,z.maxDistance=1e-4):(z.maxPolarAngle=Math.PI/2,z.minDistance=1,z.maxDistance=20);if(M){M.visible=w.displayCollider,P.visible=w.displayBVH;const e=w.physicsSteps;for(let a=0;a<e;a++)I(t/e)}z.update(),h.render(g,y)}();
//# sourceMappingURL=characterMovement.f20287fd.js.map
